<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:p="http://primefaces.org/ui">

    <h:form id="frmPaciente">
        <center>
            <p:panel class="forms">
                <p class="title">#{psychoManager.Paciente}</p>

                <p:panelGrid columns="2"> 
                    <p:outputLabel value="#{psychoManager.Nome}" for="dsNome" />                                    
                    <p:inputText id="dsNome" 
                                 readonly="#{pacienteHandler.isVisualizacao()}"
                                 value="#{pacienteHandler.selected.dsNome}" 
                                 maxlength="100" 
                                 style="width: 500px" 
                                 required="true" 
                                 requiredMessage="#{requiredMessagesHandler.getCampoObrigatorio(requiredMessagesHandler.NOME)}"
                                 pt:placeholder="#{psychoManager.Nome}"
                                 pt:autofocus=""/>

                    <p:outputLabel value="#{psychoManager.CategoriaDeValor}" for="catValor" />                                    
                    <p:selectOneRadio id="catValor" required="true" value="#{pacienteHandler.selected.stCatValor}" layout="lineDirection" style="width: 400px;" disabled="#{pacienteHandler.isVisualizacao()}" >
                        <f:selectItem itemValue="1" itemLabel="1" />
                        <f:selectItem itemValue="2" itemLabel="2" />
                        <f:selectItem itemValue="3" itemLabel="3" />
                        <f:selectItem itemValue="4" itemLabel="4" />
                    </p:selectOneRadio>       

                    <p:outputLabel value="#{psychoManager.Fone}"/>  
                    <p:outputPanel>
                        <p:dataTable id="tabFone" value="#{pacienteHandler.getTelefones()}" var="item" emptyMessage="" >
                            <p:column>
                                <f:facet name="header">
                                    <p:outputLabel value="#{psychoManager.Tipo}"/>
                                </f:facet>
                                <p:selectOneMenu value="#{item.tpFone}" disabled="#{pacienteHandler.isVisualizacao()}">
                                    <f:selectItem itemValue="C" itemLabel="#{psychoManager.Celular}" />
                                    <f:selectItem itemValue="R" itemLabel="#{psychoManager.Residencial}" />
                                    <f:selectItem itemValue="W" itemLabel="#{psychoManager.Comercial}" />
                                </p:selectOneMenu>
                            </p:column>
                            <p:column>
                                <f:facet name="header">
                                    <p:outputLabel value="#{psychoManager.Numero}"/>
                                </f:facet>
                                <p:inputMask id="phone" value="#{item.nrFone}" mask="(99) ?999999999"
                                             readonly="#{pacienteHandler.isVisualizacao()}" 
                                             pt:placeholder="#{psychoManager.Numero}"/>
                            </p:column>
                            <p:column rendered="#{!pacienteHandler.isVisualizacao()}">
                                <f:facet name="header">
                                    <p:spacer width="1"/>
                                    <p:commandLink onclick="PF('popupFone').show();" title="#{psychoManager.Novo}">
                                        <p:graphicImage library="default" name="images/new-file.png"/>
                                    </p:commandLink>
                                </f:facet>  
                                <center>
                                    <p:commandLink  action="#{pacienteHandler.removePhone}" update="tabFone" title="#{psychoManager.Apagar}" onclick="if (!confirm('#{psychoManager.DesejaRealmenteExcluirEstaInformacao}?'))
                                                return false;">
                                        <h:graphicImage library="default" name="images/trash-3.png"/>
                                    </p:commandLink>
                                </center>
                            </p:column>
                        </p:dataTable>
                    </p:outputPanel>


                    <p:outputLabel value="#{psychoManager.Email}" for="dsEmail" />
                    <p:inputText id="dsEmail" 
                                 readonly="#{pacienteHandler.isVisualizacao()}"
                                 value="#{pacienteHandler.selected.dsEmail}" 
                                 maxlength="100" 
                                 style="width: 500px" 
                                 validatorMessage="#{psychoManager.EmailInvalido}"
                                 pt:placeholder="#{psychoManager.Email}">
                        <!--                                        <f:validateRegex
                                                                    pattern="^(([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5}){1,25})+([;.](([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5}){1,25})+)*$"></f:validateRegex>
                                                                <rich:validator />-->
                    </p:inputText>

                    <p:outputLabel value="#{psychoManager.Profissao}" for="dsProfissao" />
                    <p:inputText id="dsProfissao" 
                                 readonly="#{pacienteHandler.isVisualizacao()}"
                                 value="#{pacienteHandler.selected.dsProfissao}" 
                                 maxlength="100" 
                                 style="width: 500px" 
                                 pt:placeholder="#{psychoManager.Profissao}"/>


                    <p:outputLabel value="#{psychoManager.Escolaridade}" for="dsEscolaridade" />
                    <p:inputText id="dsEscolaridade" 
                                 readonly="#{pacienteHandler.isVisualizacao()}"
                                 value="#{pacienteHandler.selected.dsEscolaridade}" 
                                 maxlength="100" 
                                 style="width: 500px" 
                                 pt:placeholder="#{psychoManager.Escolaridade}"/>


                    <p:outputLabel value="#{psychoManager.DataNascimento}" for="dtNascimento" />
                    <p:inputMask id="dtNascimento" 
                                 readonly="#{pacienteHandler.isVisualizacao()}"
                                 value="#{pacienteHandler.selected.dtNascimento}" 
                                 pt:placeholder="#{psychoManager.DataNascimento}"
                                 mask="99/99/9999">
                        <f:convertDateTime pattern="dd/MM/yyyy"  timeZone="#{pacienteHandler.timezone}"/>
                    </p:inputMask>



                    <p:outputLabel value="#{psychoManager.Filhos}" for="dsFilhos" />
                    <p:inputText id="dsFilhos" 
                                 readonly="#{pacienteHandler.isVisualizacao()}"
                                 value="#{pacienteHandler.selected.dsFilhos}" 
                                 maxlength="100" 
                                 style="width: 500px" 
                                 pt:placeholder="#{psychoManager.Filhos}"/>



                    <p:outputLabel value="#{psychoManager.Endereco}" for="dsEndereco" />
                    <p:inputText id="dsEndereco" 
                                 readonly="#{pacienteHandler.isVisualizacao()}"
                                 value="#{pacienteHandler.selected.dsEndereco}" 
                                 maxlength="100" 
                                 requiredMessage="#{requiredMessagesHandler.getCampoObrigatorio(requiredMessagesHandler.ENDERECO)}"
                                 style="width: 500px"
                                 pt:placeholder="#{psychoManager.Endereco}"/>



                    <p:outputLabel value="#{psychoManager.Bairro}" for="dsBairro" />
                    <p:inputText id="dsBairro" 
                                 readonly="#{pacienteHandler.isVisualizacao()}"
                                 value="#{pacienteHandler.selected.dsBairro}" 
                                 maxlength="100" 
                                 requiredMessage="#{requiredMessagesHandler.getCampoObrigatorio(requiredMessagesHandler.BAIRRO)}"
                                 style="width: 500px" 
                                 pt:placeholder="#{psychoManager.Bairro}"/>



                    <p:outputLabel value="#{psychoManager.Cep}" for="nrCep" />
                    <p:inputMask id="nrCep" 
                                 readonly="#{pacienteHandler.isVisualizacao()}"
                                 value="#{pacienteHandler.selected.nrCep}" 
                                 maxlength="9" 
                                 requiredMessage="#{requiredMessagesHandler.getCampoObrigatorio(requiredMessagesHandler.CEP)}"
                                 style="width: 500px" 
                                 pt:placeholder="#{psychoManager.Cep}"
                                 mask="99999-999">
                    </p:inputMask>



                    <p:outputLabel value="#{psychoManager.Estadocivil}" for="stEstadocivil" />
                    <p:selectOneRadio id="stEstadocivil" value="#{pacienteHandler.selected.stEstadocivil}" layout="lineDirection" style="width: 400px;" disabled="#{pacienteHandler.isVisualizacao()}" >
                        <f:selectItem itemValue="S" itemLabel="#{psychoManager.Solteiro}" />
                        <f:selectItem itemValue="C" itemLabel="#{psychoManager.Casado}" />
                        <f:selectItem itemValue="E" itemLabel="#{psychoManager.Separado}" />
                        <f:selectItem itemValue="V" itemLabel="#{psychoManager.Viuvo}" />
                        <f:selectItem itemValue="D" itemLabel="#{psychoManager.Divorciado}" />
                    </p:selectOneRadio>                        



                    <p:outputLabel value="#{psychoManager.Queixas}" for="dsQueixas" />
                    <p:inputTextarea id="dsQueixas" 
                                     readonly="#{pacienteHandler.isVisualizacao()}"
                                     value="#{pacienteHandler.selected.dsQueixas}" 
                                     style="width: 500px" 
                                     pt:placeholder="#{psychoManager.Queixas}"/>



                    <p:outputLabel value="#{psychoManager.Probsaude}" for="dsProbsaude" />
                    <p:inputTextarea id="dsProbsaude" 
                                     readonly="#{pacienteHandler.isVisualizacao()}"
                                     value="#{pacienteHandler.selected.dsProbsaude}" 
                                     style="width: 500px" 
                                     pt:placeholder="#{psychoManager.Probsaude}"/>



                    <p:outputLabel value="#{psychoManager.Acompmedico}" for="dsAcompmedico" />
                    <p:inputText id="dsAcompmedico" 
                                 readonly="#{pacienteHandler.isVisualizacao()}"
                                 value="#{pacienteHandler.selected.dsAcompmedico}" 
                                 maxlength="100" 
                                 style="width: 500px" 
                                 pt:placeholder="#{psychoManager.Acompmedico}"/>



                    <p:outputLabel value="#{psychoManager.Remedios}" for="dsRemedios" />
                    <p:inputText id="dsRemedios" 
                                 readonly="#{pacienteHandler.isVisualizacao()}"
                                 value="#{pacienteHandler.selected.dsRemedios}" 
                                 maxlength="100" 
                                 style="width: 500px" 
                                 pt:placeholder="#{psychoManager.Remedios}"/>


                        <p:outputLabel value="#{psychoManager.Bebe}" for="stBebe" />
                        <p:selectOneRadio id="stBebe" value="#{pacienteHandler.selected.stBebe}" style="width: 500px" disabled="#{pacienteHandler.isVisualizacao()}">
                            <f:selectItem itemValue="S" itemLabel="#{psychoManager.Sim}" />
                            <f:selectItem itemValue="N" itemLabel="#{psychoManager.Nao}" />
                        </p:selectOneRadio>                        

                        <p:outputLabel value="#{psychoManager.Fuma}" for="stFuma" />
                        <p:selectOneRadio id="stFuma" value="#{pacienteHandler.selected.stFuma}" style="width: 500px" disabled="#{pacienteHandler.isVisualizacao()}">
                            <f:selectItem itemValue="S" itemLabel="#{psychoManager.Sim}" />
                            <f:selectItem itemValue="N" itemLabel="#{psychoManager.Nao}" />
                        </p:selectOneRadio>                        

                        <p:outputLabel value="#{psychoManager.Drogas}" for="stDrogas" />
                        <p:selectOneRadio id="stDrogas" value="#{pacienteHandler.selected.stDrogas}" style="width: 500px" disabled="#{pacienteHandler.isVisualizacao()}">
                            <f:selectItem itemValue="S" itemLabel="#{psychoManager.Sim}" />
                            <f:selectItem itemValue="N" itemLabel="#{psychoManager.Nao}" />
                        </p:selectOneRadio>                        

                        <p:outputLabel value="#{psychoManager.Insonia}" for="stInsonia" />
                        <p:selectOneRadio id="stInsonia" value="#{pacienteHandler.selected.stInsonia}" style="width: 500px" disabled="#{pacienteHandler.isVisualizacao()}">
                            <f:selectItem itemValue="S" itemLabel="#{psychoManager.Sim}" />
                            <f:selectItem itemValue="N" itemLabel="#{psychoManager.Nao}" />
                        </p:selectOneRadio>                        

                        <p:outputLabel value="#{psychoManager.Tratpsic}" for="stTratpsic" />
                        <p:selectOneRadio id="stTratpsic" value="#{pacienteHandler.selected.stTratpsic}" style="width: 500px" disabled="#{pacienteHandler.isVisualizacao()}">
                            <f:selectItem itemValue="S" itemLabel="#{psychoManager.Sim}" />
                            <f:selectItem itemValue="N" itemLabel="#{psychoManager.Nao}" />
                        </p:selectOneRadio>                        

                    <p:outputLabel value="#{psychoManager.Resultado}" for="dsResultado" />
                    <p:inputText id="dsResultado" 
                                 readonly="#{pacienteHandler.isVisualizacao()}"
                                 value="#{pacienteHandler.selected.dsResultado}" 
                                 maxlength="100" 
                                 style="width: 500px" 
                                 pt:placeholder="#{psychoManager.Resultado}"/>




                    <p:outputLabel value="#{psychoManager.Calmante}" for="dsCalmante" />
                    <p:inputText id="dsCalmante" 
                                 readonly="#{pacienteHandler.isVisualizacao()}"
                                 value="#{pacienteHandler.selected.dsCalmante}" 
                                 maxlength="100" 
                                 style="width: 500px" 
                                 pt:placeholder="#{psychoManager.Calmante}"/>



                    <p:outputLabel value="#{psychoManager.Observacao}" for="dsObservacao" />
                    <p:inputText id="dsObservacao" 
                                 readonly="#{pacienteHandler.isVisualizacao()}"
                                 value="#{pacienteHandler.selected.dsObservacao}" 
                                 maxlength="100" 
                                 style="width: 500px" 
                                 pt:placeholder="#{psychoManager.Observacao}"/>



                    <p:outputLabel value="#{psychoManager.Ficha}" for="dsFicha" />
                    <p:panelGrid columns="1">
                        <h:commandLink value="#{pacienteHandler.selected.dsFicha}" action="#{pacienteHandler.downloadPDF}" target="_blank" rendered="#{pacienteHandler.isVisualizacao()}"/>
                        <p:inputText id="dsFicha" 
                                     disabled="true"
                                     rendered="#{pacienteHandler.isAtualizacao()}"
                                     value="#{pacienteHandler.selected.dsFicha}" 
                                     maxlength="100" 
                                     style="width: 500px"
                                     pt:placeholder="#{psychoManager.Ficha}"/>
                        <p:fileUpload  
                            label="Escolher"
                            cancelLabel="Cancelar"
                            uploadLabel="Carregar"
                            fileUploadListener="#{pacienteHandler.upload}" 
                            mode="advanced" 
                            rendered="#{pacienteHandler.isAtualizacao()}"
                            allowTypes="/(\.|\/)(PDF|pdf)$/"
                            update="dsFicha"/>
                    </p:panelGrid>                                    
                </p:panelGrid> 

                <br/>
                <!--<p:messages id="messages" showDetail="false" autoUpdate="true" closable="true" />-->
                <p:messages id="messages" showDetail="false" closable="true" />
                <p:panel class="pnlButton" >
                    <p:panelGrid columns="3">
                        <p:commandButton value="#{psychoManager.Gravar}" action="#{pacienteHandler.gravar()}"  rendered="#{!pacienteHandler.isVisualizacao()}" update=":content"/>
                        <p:commandButton value="#{psychoManager.Voltar}" action="#{pacienteHandler.voltar()}" process="@this" update=":content"/>
                        <p:commandButton value="#{psychoManager.Fechar}" action="#{pacienteHandler.fechar()}" process="@this" update=":content"/>
                    </p:panelGrid>
                </p:panel>
            </p:panel>
        </center>  

        <p:dialog id="popupFone" position="top" styleClass="dialog" header="#{psychoManager.Telefones}" widgetVar="popupFone" minHeight="40" modal="true" showEffect="clip" hideEffect="clip" >
            <center>
                <p:panel id="pnlFone" style="width: 530px">
                    <p:panelGrid columns="2">
                        <p:selectOneMenu value="#{pacienteHandler.tpNovoFone}" widgetVar="tFone">
                            <f:selectItem itemValue="C" itemLabel="#{psychoManager.Celular}" />
                            <f:selectItem itemValue="R" itemLabel="#{psychoManager.Residencial}" />
                            <f:selectItem itemValue="W" itemLabel="#{psychoManager.Comercial}" />
                            <f:ajax event="change" execute="@this" listener="#{pacienteHandler.setTpNovoFone(pacienteHandler.tpNovoFone)}" />
                        </p:selectOneMenu>
                        <p:inputMask id="num" 
                                     widgetVar="im"
                                     value="#{pacienteHandler.nrNovoFone}" 
                                     style="width: 200px"
                                     mask="(99) ?999999999"
                                     pt:placeholder="#{psychoManager.Numero}"> 
                            <f:ajax event="change" execute="@this" listener="#{pacienteHandler.setNrNovoFone(pacienteHandler.nrNovoFone)}" />
                        </p:inputMask>  

                    </p:panelGrid>

                    <p:panel>
                        <p:panelGrid columns="2">
                            <p:commandButton value="#{psychoManager.Gravar}" 
                                             action="#{pacienteHandler.addNewPhone()}"
                                             update="tabFone,pnlFone"/>
                            <p:commandButton value="#{psychoManager.Fechar}" onclick="PF('popupFone').hide();"/>
                        </p:panelGrid>
                    </p:panel>                    

                </p:panel>
            </center>
        </p:dialog>               

    </h:form>
</ui:composition>