<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:p="http://primefaces.org/ui">

    <h:form id="frmConsultasEmAberto">
        <center>
            <p:panel class="forms">
                <p class="title">#{psychoManager.ConsultasEmAberto}</p>

                <p:panelGrid columns="2">
                    <p:outputLabel value="*#{psychoManager.De}" />
                    <p:calendar id="calendarDe"
                                value="#{consultasAbertasPeriodoHandler.calendarPeriodBean.selectedDateDe}"  
                                locale="#{languageHandler.locale}"
                                pattern="dd/MM/yyyy" 
                                mask="true"
                                disabled="#{consultasAbertasPeriodoHandler.calendarPeriodBean.disabled}"
                                required="true"
                                requiredMessage="#{psychoManager.EscolhaUmaDataInicial}">
                    </p:calendar>

                    <p:outputLabel value="*#{psychoManager.Ate}" />
                    <p:calendar id="calendarAte"
                                value="#{consultasAbertasPeriodoHandler.calendarPeriodBean.selectedDateAte}"  
                                locale="#{languageHandler.locale}"
                                pattern="dd/MM/yyyy" 
                                mask="true"
                                disabled="#{consultasAbertasPeriodoHandler.calendarPeriodBean.disabled}"
                                required="true"
                                requiredMessage="#{psychoManager.EscolhaUmaDataFinal}">
                    </p:calendar>

                </p:panelGrid>                

                <br/>
                <p:messages id="messages" showDetail="false" autoUpdate="true" closable="true" />
                <p:panel class="pnlButton" >
                    <p:panelGrid columns="2">
                        <p:commandButton value="#{psychoManager.Consultar}" 
                                         ajax="false" 
                                         actionListener="#{consultasAbertasPeriodoHandler.consultar()}"> 
                            <p:fileDownload value="#{consultasAbertasPeriodoHandler.reportFile}" />
                        </p:commandButton>
                        <p:commandButton value="#{psychoManager.Fechar}" action="#{consultasAbertasPeriodoHandler.fechar()}" process="@this" update=":content"/>                    
                    </p:panelGrid>
                </p:panel>
            </p:panel>
        </center>                        
    </h:form>
    <p:dialog modal="true" widgetVar="statusDialog" draggable="false" closable="false" resizable="false">
        <p:graphicImage library="default" name="images/ajaxloadingbar.gif"/>
    </p:dialog>
    <script type="text/javascript">
        function start() {
            PF('statusDialog').show();
        }

        function stop() {
            PF('statusDialog').hide();
        }
    </script>    
</ui:composition>