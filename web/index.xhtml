<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:p="http://primefaces.org/ui">

    <f:view contentType="text/html">
        <h:head>
            <title>#{psychoManager.TituloSistema}</title>
            <h:outputStylesheet library="default" name="css/style_login.css"/>
        </h:head>
        <h:body>
            <script type="text/javascript">
                //<![CDATA[
                function getLarguraTela() {
                    return window.screen.width;
                }
                function getAlturaTela() {
                    return window.screen.height;
                }
                //]]> 
            </script> 
            <div class="wrapper">
                <!-- nao consegui descobrir pq os parametro prependID e onsubmit precisam ficar na linha abaixo, 
                se forem retirados a proxima tela aparece com barra de rolagem -->
                <h:form class="login" id="formLogin" prependId="false" onsubmit="document.getElementById('formLogin').action = 'j_security_check';">


                    <p class="title">#{psychoManager.Autenticacao}</p>

                    <h:inputText value="#{loginHandler.name}" 
                                 required="true" 
                                 requiredMessage="#{requiredMessagesHandler.getCampoObrigatorio(requiredMessagesHandler.USUARIO)}" 
                                 id="j_username" 
                                 pt:placeholder="#{psychoManager.Usuario}"
                                 onblur="this.value = this.value.trim().toLowerCase();"
                                 pt:autofocus=""/>
                    <i class="fa fa-user"></i>

                    <h:inputSecret value="#{loginHandler.pass}" 
                                   required="true" 
                                   requiredMessage="#{requiredMessagesHandler.getCampoObrigatorio(requiredMessagesHandler.SENHA)}" 
                                   id="j_password" 
                                   pt:placeholder="#{psychoManager.Senha}"/>
                    <i class="fa fa-key"></i>

                    <!--<a href="#">Forgot your password?</a>-->
                    <p:messages id="messages" showDetail="false" autoUpdate="true" closable="true" />


                    <p:commandButton id="btEntrar" 
                                     value="#{psychoManager.Login}" 
                                     ajax="false"
                                     action="#{loginHandler.login()}"
                                     onclick="setScreen([{name: 'scWidth', value: getLarguraTela()}, {name: 'scHeight', value: getAlturaTela()}]);"/>                    


                    <p:remoteCommand name="setScreen"
                                     action="#{mainHandler.setScreen()}" >
                    </p:remoteCommand>        


                </h:form>
                <footer><a target="blank" href="https://iidh.com.br/">iidh.com.br</a></footer>
            </div>
            
        </h:body>
    </f:view>
</html>
